晚上继续研究atmega328p，终于有了突破了，主要是这几点：
(1) 我本来以为脱离arduino uno的电路板去串口烧录atmega328p是很容易的事情，结果发现这是很困难的，
因为uno有个特殊的reset信号接到atmega328p的reset脚上，可惜我试了两个usb-ttl都无法实现这个功能，
也就是说无法在非uno的板上实现串口烧录IAP
(2) 市面上买到的山寨uno板，不管是直插DIP还是贴片焊接的，都可以通过usbasp读出整个flash，
就是说可以把芯片里面的代码还原出来，原因是芯片没有锁定或者加密，可以通过6针的ICSP口，
最好买一个6针转10针的转接板，用usbasp读出来
(3) 建议买6针转10针的ISP转接板，之前我用杜邦线接，结果出问题了，尽量用转接板
(4) 实验证明不带bootloader的hex，直接用usbasp烧录到芯片上，是可以运行的，
但要注意熔丝位的设置，我的做法是照抄uno板上328p芯片的熔丝位，当然也可以用默认的，
不过默认的熔丝位，使用的内部晶振频率很低，建议设置为外部晶振，
而uno板上的熔丝位正是用了外部晶振（大于8MHz）

Low/High/Extra/Encry=FF,DE,FD,FF
8.0MHz:85

6pin-10pin转接板，VCC对应上方ICSP有字的那边

我已经成功把atmega328p的串口烧录（IAP）跑通了（通过拔掉芯片的山寨uno做串口烧录工具），
结果我还是花钱买了一套散件自己用面包板搭建最小系统，
用atmega8的开发板有问题，因为它把reset接到高电平上，
如果自己搭的话不会有问题，因为reset脚不会外接其他电路。
总结一下，如果要串口烧录，需要准备下面的东西：
(1) 已经烧录好bootloader的atmega328p，我是用usbasp烧录的 
(2) 带16M晶振的最小系统，网上有带晶振的散件卖（奇怪的是stc似乎没有带晶振的散件），我自己动手用面包板搭建，电源用山寨uno板提供 
(3) 拆掉328芯片的山寨uno板，用它的Reset、RX、TX这三个脚做串口烧录，接到面包板上的最小系统对应脚上 
(4) 最好保证晶振是16M，不过换成8M是否可行我还没测试，有空再测试

我又做了一个实验，如果把atmega328p的晶振换成8M，是无法用拔掉芯片的山寨uno板串口烧录IAP，
所以如果你想用Arduino IDE和拔掉328芯片的山寨uno板做IAP，那么必须使用16M的晶振，
我怀疑跟波特率有关

关于面包板搭建atmega328p最小系统，开始的时候我以为有两个问题会很难解决，其实都不是很困难：
(1) 我以为面包板上面插晶振会有问题，其实问题并不大，甚至晶振两脚之间的电阻都可以省略 
(2) 关于熔丝位，听起来好像很复杂，其实是4个特殊的字节，可以在progisp（控制usbasp）上修改，
但这四个字节如果设置不当会变砖，我就因为禁用ISP把一块芯片变砖了（相当于永远地锁死芯片不能读写），
简单来说可以参考官方的avrdude参数去设置，不过我觉得最省事的做法是买一个山寨uno，
用usbasp（PC上使用progisp.exe）把出厂固件和熔丝位这两个东西读出来，方便克隆到别的atmega328p上
（因为空白的atmega328p是没有bootloader固件的），相当于系统还原

我又试了一下，终于找到用普通的USB-TTL转换器烧录atmega328p的方法——
之前不成功是因为我没有把8M换成16M的晶振。
诀窍是用104电容接在atmega328p的reset脚上，
然后接在USB-TTL转换器的RTS或DTR脚（有些转换器叫RESET脚），
Arduino IDE选择Uno类型

搭建atmega328p最小系统（用Arduino串口烧录）所需要的材料（AVR有很多，但如果想上Arduino的话建议用atmega328p和16MHz晶振）：
(1) 面包板+若干公对公杜邦线。也可以准备一些公对母的杜邦线，USB-TTL转换器可能会用到公对母杜邦线
(2) atmega328p的DIP版28脚，最好有对应的针脚图，不需要插座，因为插座不容易插在面包板上。
如果(3)买了山寨uno，可以不用再买这个DIP芯片了
(3) atmega8开发板和usbasp。可以用DIP芯片的山寨uno板+usbasp代替，但需要另外购买一个10针转6针ICSP的转接板。
用于烧录bootloader和熔丝位。建议买山寨uno板，可以省略不用烧录bootloader，而且可以得到熔丝位4个字节的设置方法
（也可以网上找到）
(4) USB-TTL串口转换器+104陶瓷电容。可以用拔掉DIP芯片的山寨uno板代替，这样就不需要reset脚串联104电容了。
这个同时也作为最小系统的5V电源
(5) 16MHz晶振和22陶瓷电容2个，注意晶振用8MHz或者其他值可能会无法串口烧录，但可以用usbasp烧录，
所以建议用16M晶振
(6) 1个200R电阻和1个LED。做D13脚的测试灯，电阻可以买一包黄色版的碳膜电阻，比蓝色电阻要便宜一些，
LED随便都没问题，其实150欧-200欧配合不同颜色和压降LED的效果差别并不大，不需要担心烧掉。
200欧的阻值是可以算出的，以前已经讨论过这个问题了

arduino uno和nano的bootloader其实并没有擦除整个Flash的内容，它只会做数据覆盖，
也就是说串口烧录并没有完全冲走所有的代码内存，
可以通过usbasp看到以前的代码二进制
